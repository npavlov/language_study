/* ========================================
   Component styles — BEM naming
   ======================================== */

/* --- Buttons --- */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  min-height: 48px;
  min-width: 48px;
  padding: var(--spacing-sm) var(--spacing-lg);
  border: none;
  border-radius: var(--radius-md);
  font: inherit;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.15s ease, transform 0.1s ease;
  -webkit-tap-highlight-color: transparent;
}

.btn--primary {
  background-color: var(--color-primary);
  color: #fff;
}

.btn--primary:hover { background-color: var(--color-primary-light); }

.btn--success {
  background-color: var(--color-success);
  color: #fff;
}

.btn--danger {
  background-color: var(--color-danger);
  color: #fff;
}

.btn--outline {
  background-color: transparent;
  border: 2px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover { border-color: var(--color-primary); color: var(--color-primary); }

.btn--sm {
  min-height: 36px;
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: var(--font-size-sm);
}

.btn--block { width: 100%; }

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* --- Cards --- */
.card {
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.card--interactive {
  cursor: pointer;
}

.card--selected {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px var(--color-primary);
}

.card--interactive:active {
  transform: scale(0.98);
}

.card__title {
  font-size: var(--font-size-lg);
  font-weight: 700;
  margin-bottom: var(--spacing-xs);
}

.card__subtitle {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.card__icon {
  font-size: var(--font-size-2xl);
  margin-bottom: var(--spacing-sm);
}

/* --- 3D Flashcard --- */
.flashcards__scene {
  perspective: 800px;
  width: 100%;
  max-width: 24rem;
  margin: 0 auto;
}

.card__inner {
  position: relative;
  width: 100%;
  min-height: 14rem;
  transition: transform 0.5s ease;
  transform-style: preserve-3d;
}

.card--flipped .card__inner {
  transform: rotateY(180deg);
}

.card--no-transition .card__inner {
  transition: none;
}

.card__front,
.card__back {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  backface-visibility: hidden;
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 2px solid var(--color-border);
  background-color: var(--color-bg);
}

.card__back {
  transform: rotateY(180deg);
}

.card__term {
  font-size: var(--font-size-xl);
  font-weight: 700;
  text-align: center;
  word-break: break-word;
}

.card__hint {
  margin-top: var(--spacing-md);
  text-align: center;
}

.card__hint-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.card__hint-text {
  font-size: var(--font-size-lg);
  font-weight: 600;
  margin-top: var(--spacing-xs);
}

/* --- Inputs --- */
.input {
  display: block;
  width: 100%;
  min-height: 48px;
  padding: var(--spacing-sm) var(--spacing-md);
  font: inherit;
  font-size: var(--font-size-base);
  color: var(--color-text);
  background-color: var(--color-bg);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  outline: none;
  transition: border-color 0.15s ease;
}

.input:focus {
  border-color: var(--color-primary);
}

.input--error {
  border-color: var(--color-danger);
}

.textarea {
  min-height: 6rem;
  resize: vertical;
}

/* --- Select / Dropdown --- */
.select {
  display: block;
  width: 100%;
  min-height: 48px;
  padding: var(--spacing-sm) var(--spacing-md);
  font: inherit;
  color: var(--color-text);
  background-color: var(--color-bg);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2364748b' fill='none' stroke-width='2'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--spacing-md) center;
  padding-right: 2.5rem;
}

/* --- Progress Bar --- */
.progress {
  width: 100%;
  height: 0.5rem;
  background-color: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.progress__fill {
  height: 100%;
  background-color: var(--color-primary);
  border-radius: var(--radius-sm);
  transition: width 0.3s ease;
}

.progress__fill--success { background-color: var(--color-success); }
.progress__fill--danger { background-color: var(--color-danger); }

/* --- Mastery bar (stacked segments) --- */
.mastery-bar {
  display: flex;
  width: 100%;
  height: 1.25rem;
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.mastery-bar__segment {
  height: 100%;
  transition: width 0.3s ease;
}

.mastery-bar__segment--new       { background-color: var(--color-border); }
.mastery-bar__segment--learning  { background-color: var(--color-warning); }
.mastery-bar__segment--known     { background-color: var(--color-primary); }
.mastery-bar__segment--mastered  { background-color: var(--color-success); }

/* --- Badge / Tag --- */
.badge {
  display: inline-flex;
  align-items: center;
  padding: 0.125rem var(--spacing-sm);
  font-size: var(--font-size-sm);
  font-weight: 600;
  border-radius: var(--radius-sm);
  background-color: var(--color-bg-secondary);
  color: var(--color-text-secondary);
}

.badge--user {
  background-color: #dbeafe;
  color: var(--color-primary);
}

/* --- Toggle / Switch --- */
.toggle {
  display: inline-flex;
  background-color: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  overflow: hidden;
  border: 1px solid var(--color-border);
}

.toggle__option {
  padding: var(--spacing-sm) var(--spacing-md);
  font: inherit;
  font-size: var(--font-size-sm);
  font-weight: 600;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  min-height: 48px;
  transition: background-color 0.15s ease, color 0.15s ease;
}

.toggle__option--active {
  background-color: var(--color-primary);
  color: #fff;
}

/* --- Menu screen --- */
.menu__header {
  text-align: center;
  margin-bottom: var(--spacing-lg);
}

.menu__title {
  font-size: var(--font-size-2xl);
  font-weight: 800;
}

.menu__subtitle {
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  margin-top: var(--spacing-xs);
}

.menu__section {
  margin-bottom: var(--spacing-lg);
}

.menu__word-count {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin-top: var(--spacing-xs);
}

.menu__stats {
  display: flex;
  justify-content: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-sm) 0;
}

.menu__stat {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* --- Tab Bar (bottom nav) --- */
.tab-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-around;
  align-items: center;
  height: 56px;
  background-color: var(--color-bg);
  border-top: 1px solid var(--color-border);
  padding-bottom: env(safe-area-inset-bottom, 0);
  z-index: 100;
}

.tab-bar__item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: var(--spacing-xs);
  font-size: 0.625rem;
  color: var(--color-text-secondary);
  text-decoration: none;
  min-width: 48px;
  min-height: 48px;
  justify-content: center;
  border: none;
  background: none;
  cursor: pointer;
}

.tab-bar__item--active {
  color: var(--color-primary);
}

.tab-bar__icon {
  font-size: 1.25rem;
}

/* --- Screen sections --- */
.screen {
  display: none;
  padding-bottom: 4rem; /* space for tab bar */
}

.screen--active {
  display: block;
}

/* --- Header --- */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-sm) 0;
  margin-bottom: var(--spacing-md);
}

.header__title {
  font-size: var(--font-size-xl);
  font-weight: 800;
}

.header__score {
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--color-primary);
}

/* --- Stats chart bars (CSS-only) --- */
.bar-chart {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  height: 6rem;
  padding: var(--spacing-xs) 0;
}

.bar-chart__bar {
  flex: 1;
  min-width: 1rem;
  background-color: var(--color-primary-light);
  border-radius: var(--radius-sm) var(--radius-sm) 0 0;
  transition: height 0.3s ease;
}

/* --- Form group --- */
.form-group {
  margin-bottom: var(--spacing-md);
}

.form-group__label {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--color-text-secondary);
  margin-bottom: var(--spacing-xs);
}

/* --- Drop zone --- */
.drop-zone {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 6rem;
  border: 2px dashed var(--color-border);
  border-radius: var(--radius-lg);
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  transition: border-color 0.15s ease, background-color 0.15s ease;
  cursor: pointer;
}

.drop-zone--dragover {
  border-color: var(--color-primary);
  background-color: var(--color-bg-secondary);
}

/* --- Word list (add-words) --- */
.word-list {
  list-style: none;
}

.word-list__item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) 0;
  border-bottom: 1px solid var(--color-border);
}

.word-list__term {
  font-weight: 600;
  flex: 1;
}

.word-list__actions {
  display: flex;
  gap: var(--spacing-xs);
}

/* --- Feedback animations --- */
@keyframes flash-correct {
  0% { background-color: var(--color-success); }
  100% { background-color: transparent; }
}

@keyframes flash-wrong {
  0% { background-color: var(--color-danger); }
  100% { background-color: transparent; }
}

@keyframes fade-out {
  to { opacity: 0; transform: scale(0.9); }
}

.flash-correct { animation: flash-correct 0.6s ease; }
.flash-wrong { animation: flash-wrong 0.6s ease; }
.fade-out { animation: fade-out 0.5s ease forwards; }

/* --- Quiz options --- */
.quiz__option {
  width: 100%;
  text-align: left;
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-sm);
  background-color: var(--color-bg-secondary);
  border: 2px solid var(--color-text-secondary);
  border-radius: var(--radius-md);
  font-size: var(--font-size-base);
  font-weight: 600;
  color: var(--color-text);
  transition: border-color 0.15s ease, background-color 0.15s ease;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.quiz__option:hover:not(:disabled) {
  border-color: var(--color-primary);
}

.quiz__option--correct {
  border-color: var(--color-success);
  background-color: rgba(22, 163, 74, 0.25);
  color: #15803d;
}

.quiz__option--wrong {
  border-color: var(--color-danger);
  background-color: rgba(220, 38, 38, 0.25);
  color: #b91c1c;
}

@media (prefers-color-scheme: dark) {
  .quiz__option--correct {
    background-color: rgba(22, 163, 74, 0.3);
    color: #4ade80;
  }
  .quiz__option--wrong {
    background-color: rgba(220, 38, 38, 0.3);
    color: #f87171;
  }
}

/* --- Match pairs --- */
.match__grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-sm);
}

.match__item {
  min-height: 48px;
  padding: var(--spacing-sm) var(--spacing-md);
  background-color: var(--color-bg-secondary);
  border: 2px solid var(--color-text-secondary);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--color-text);
  text-align: center;
  cursor: pointer;
  transition: border-color 0.15s ease, opacity 0.3s ease, transform 0.3s ease;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.match__item--selected {
  border-color: var(--color-primary);
  background-color: rgba(37, 99, 235, 0.2);
}

.match__item--correct {
  border-color: var(--color-success);
  background-color: rgba(22, 163, 74, 0.25);
}

.match__item--wrong {
  border-color: var(--color-danger);
  background-color: rgba(220, 38, 38, 0.25);
}

@media (prefers-color-scheme: dark) {
  .match__item--selected {
    background-color: rgba(37, 99, 235, 0.3);
  }
  .match__item--correct {
    background-color: rgba(22, 163, 74, 0.3);
  }
  .match__item--wrong {
    background-color: rgba(220, 38, 38, 0.3);
  }
}

.match__item--matched {
  opacity: 0.3;
  transform: scale(0.95);
  pointer-events: none;
}

/* --- Typing mode --- */
.typing__input-area {
  display: flex;
  gap: var(--spacing-sm);
  margin: var(--spacing-md) 0;
}

/* font-size >= 16px prevents iOS Safari auto-zoom on focus */
.typing__input {
  flex: 1;
  font: inherit;
  font-size: max(1rem, 16px);
  color: var(--color-text);
  background-color: var(--color-bg);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm) var(--spacing-md);
  min-height: 48px;
  outline: none;
  transition: border-color 0.15s ease;
}

.typing__input:focus {
  border-color: var(--color-primary);
}

.typing__feedback {
  text-align: center;
  font-weight: 600;
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  margin: var(--spacing-sm) 0;
}

.typing__feedback--correct { color: var(--color-success); }
.typing__feedback--wrong { color: var(--color-danger); }
.typing__feedback--close { color: var(--color-warning); }

/* ========================================
   Flashcard mode — buttons, progress, summary
   ======================================== */

/* Override generic card hover for flashcard context */
.flashcards .card {
  box-shadow: none;
}
.flashcards .card:hover {
  box-shadow: none;
  transform: none;
}

.flashcards {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  padding: var(--spacing-sm) 0;
}

/* Back button */
.flashcards__back-btn {
  align-self: flex-start;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  font-weight: 600;
  padding: var(--spacing-xs) var(--spacing-sm);
  min-height: 48px;
}
.flashcards__back-btn:active {
  color: var(--color-primary);
}

/* Progress */
.flashcards__progress {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.flashcards__progress-bar {
  flex: 1;
  height: 0.5rem;
  background-color: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.flashcards__progress-fill {
  height: 100%;
  background-color: var(--color-primary);
  border-radius: var(--radius-sm);
  transition: width 0.3s ease;
}

.flashcards__progress-text {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: 600;
  white-space: nowrap;
}

/* Tap prompt */
.card__tap-prompt {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin-top: var(--spacing-md);
  opacity: 0.7;
}

/* Actions */
.flashcards__actions {
  display: flex;
  gap: var(--spacing-sm);
  justify-content: center;
  padding: var(--spacing-sm) 0;
}

.flashcards__btn {
  flex: 1;
  max-width: 10rem;
  min-height: 48px;
  padding: var(--spacing-sm) var(--spacing-md);
  border: none;
  border-radius: var(--radius-md);
  font: inherit;
  font-weight: 700;
  font-size: var(--font-size-base);
  cursor: pointer;
  transition: background-color 0.15s ease, transform 0.1s ease;
  -webkit-tap-highlight-color: transparent;
}
.flashcards__btn:active { transform: scale(0.96); }
.flashcards__btn:disabled { opacity: 0.5; cursor: not-allowed; }

.flashcards__btn--dont {
  background-color: var(--color-danger);
  color: #fff;
}
.flashcards__btn--know {
  background-color: var(--color-success);
  color: #fff;
}
.flashcards__btn--review {
  background-color: var(--color-warning);
  color: #fff;
}
.flashcards__btn--done {
  background-color: var(--color-primary);
  color: #fff;
}

/* Card slide animation */
@keyframes card-slide-out {
  to { opacity: 0; transform: translateX(-40px); }
}
@keyframes card-slide-in {
  from { opacity: 0; transform: translateX(40px); }
  to { opacity: 1; transform: translateX(0); }
}
.card--slide-out { animation: card-slide-out 0.15s ease forwards; }
.card--slide-in { animation: card-slide-in 0.2s ease forwards; }

/* Summary */
.flashcards__summary {
  text-align: center;
  padding: var(--spacing-lg) 0;
}

.flashcards__summary-title {
  font-size: var(--font-size-xl);
  font-weight: 800;
  margin-bottom: var(--spacing-lg);
}

.flashcards__summary-stats {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.flashcards__stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-xs);
}

.flashcards__stat-value {
  font-size: var(--font-size-xl);
  font-weight: 800;
  color: var(--color-primary);
}

.flashcards__stat-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

/* ========================================
   Quiz mode — header, progress, summary
   ======================================== */

.quiz {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.quiz__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) 0;
}

.quiz__back-btn {
  background: transparent;
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  font-weight: 600;
  padding: var(--spacing-xs) var(--spacing-sm);
  min-height: 48px;
}

.quiz__progress-wrap {
  flex: 1;
}

.quiz__progress-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: 600;
  margin-bottom: var(--spacing-xs);
  display: block;
}

.quiz__progress-bar {
  width: 100%;
  height: 0.5rem;
  background-color: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.quiz__progress-fill {
  height: 100%;
  background-color: var(--color-primary);
  border-radius: var(--radius-sm);
  transition: width 0.3s ease;
}

.quiz__score {
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--color-primary);
  white-space: nowrap;
}

.quiz__body {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.quiz__term {
  font-size: var(--font-size-xl);
  font-weight: 800;
  text-align: center;
  padding: var(--spacing-lg);
  background-color: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  border: 2px solid var(--color-border);
}

.quiz__hint {
  text-align: center;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  min-height: 1.5em;
}
.quiz__hint--visible {
  color: var(--color-warning);
  font-weight: 600;
}

.quiz__options {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.quiz__error {
  text-align: center;
  color: var(--color-danger);
  padding: var(--spacing-lg);
}

/* Quiz summary */
.quiz__summary {
  text-align: center;
  padding: var(--spacing-lg) 0;
}

.quiz__summary-title {
  font-size: var(--font-size-xl);
  font-weight: 800;
  margin-bottom: var(--spacing-lg);
}

.quiz__summary-stats {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--spacing-xs) var(--spacing-md);
  text-align: left;
  max-width: 16rem;
  margin: 0 auto var(--spacing-lg);
}

.quiz__summary-stat-label {
  font-weight: 600;
  color: var(--color-text-secondary);
}

.quiz__summary-stat-value {
  font-weight: 700;
  color: var(--color-primary);
}

.quiz__summary-mistakes-title {
  font-size: var(--font-size-base);
  font-weight: 700;
  margin-bottom: var(--spacing-sm);
  text-align: left;
}

.quiz__summary-mistakes {
  list-style: none;
  text-align: left;
  margin-bottom: var(--spacing-lg);
}

.quiz__summary-mistake {
  padding: var(--spacing-xs) 0;
  border-bottom: 1px solid var(--color-border);
  font-size: var(--font-size-sm);
}

.quiz__summary-mistake-term {
  font-weight: 700;
}
.quiz__summary-mistake-arrow {
  color: var(--color-text-secondary);
}
.quiz__summary-mistake-answer {
  color: var(--color-success);
  font-weight: 600;
}

.quiz__summary-perfect {
  color: var(--color-success);
  font-weight: 600;
  margin-bottom: var(--spacing-lg);
}

.quiz__replay {
  background-color: var(--color-primary);
  color: #fff;
  font-weight: 700;
  padding: var(--spacing-sm) var(--spacing-lg);
  min-height: 48px;
}

.quiz__menu-btn {
  background-color: transparent;
  color: var(--color-text-secondary);
  border: 2px solid var(--color-border);
  font-weight: 600;
  padding: var(--spacing-sm) var(--spacing-lg);
  min-height: 48px;
  margin-top: var(--spacing-sm);
}

/* ========================================
   Typing mode — header, card, hints, summary
   ======================================== */

.typing {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.typing--summary {
  gap: var(--spacing-lg);
}

.typing__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-sm);
}

.typing__back-btn {
  background: transparent;
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  font-weight: 600;
  padding: var(--spacing-xs) var(--spacing-sm);
  min-height: 48px;
}

.typing__progress-wrap {
  flex: 1;
}

.typing__progress-bar {
  width: 100%;
  height: 0.5rem;
  background-color: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.typing__progress-fill {
  height: 100%;
  background-color: var(--color-primary);
  border-radius: var(--radius-sm);
  transition: width 0.3s ease;
}

.typing__progress-label {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: 600;
  display: block;
  margin-top: var(--spacing-xs);
}

.typing__score {
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--color-primary);
  white-space: nowrap;
}

.typing__card {
  text-align: center;
  padding: var(--spacing-lg);
  background-color: var(--color-bg);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-lg);
}

.typing__word-type {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.typing__word-term {
  font-size: var(--font-size-xl);
  font-weight: 800;
  margin-top: var(--spacing-xs);
}

/* Direction prompt */
.typing__prompt-label {
  text-align: center;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  font-weight: 600;
}

.typing__hint-area {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  min-height: 1.5rem;
}

.typing__hint {
  font-size: var(--font-size-sm);
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  background-color: var(--color-bg-secondary);
}

.typing__hint--masked {
  border-left: 3px solid var(--color-text-secondary);
  font-family: monospace;
  font-size: var(--font-size-lg);
  letter-spacing: 0.1em;
}

.typing__hint-count {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  letter-spacing: normal;
  font-family: var(--font-family);
  margin-left: var(--spacing-sm);
}

.typing__hint--level-1 { border-left: 3px solid var(--color-primary); }
.typing__hint--level-2 { border-left: 3px solid var(--color-warning); }

.typing__hint-lang {
  font-weight: 700;
  color: var(--color-text-secondary);
}

.typing__hint-text {
  font-weight: 600;
}

.typing__input-area--correct { animation: flash-correct 0.6s ease; }
.typing__input-area--wrong { animation: flash-wrong 0.6s ease; }
.typing__input-area--close { animation: flash-wrong 0.4s ease; }

.typing__btn {
  min-height: 48px;
  padding: var(--spacing-sm) var(--spacing-md);
  border: none;
  border-radius: var(--radius-md);
  font: inherit;
  font-weight: 600;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}
.typing__btn:disabled { opacity: 0.5; cursor: not-allowed; }

.typing__btn--submit {
  background-color: var(--color-primary);
  color: #fff;
  min-width: 5rem;
}

.typing__btn--hint {
  background-color: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  color: var(--color-text);
}

.typing__btn--letter {
  background-color: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  color: var(--color-text);
}

.typing__btn--skip {
  background-color: transparent;
  color: var(--color-text-secondary);
  border: 2px solid var(--color-border);
}

.typing__btn--play-again {
  background-color: var(--color-primary);
  color: #fff;
  font-weight: 700;
  width: 100%;
}

.typing__btn--menu {
  background-color: transparent;
  color: var(--color-text-secondary);
  border: 2px solid var(--color-border);
  font-weight: 600;
  width: 100%;
  margin-top: var(--spacing-sm);
}

.typing__actions {
  display: flex;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.typing__actions .typing__btn {
  flex: 1;
  min-width: 0;
}

@keyframes typing-shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-4px); }
  40%, 80% { transform: translateX(4px); }
}
.typing__feedback--shake { animation: typing-shake 0.4s ease; }

/* Typing summary */
.typing__summary-title {
  font-size: var(--font-size-xl);
  font-weight: 800;
  text-align: center;
}

.typing__summary-stats {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.typing__stat-row {
  display: flex;
  justify-content: space-between;
  padding: var(--spacing-xs) 0;
  border-bottom: 1px solid var(--color-border);
}

.typing__stat-label {
  font-weight: 600;
  color: var(--color-text-secondary);
}

.typing__stat-value {
  font-weight: 700;
  color: var(--color-primary);
}

.typing__mistakes {
  margin-top: var(--spacing-sm);
}

.typing__mistakes-title {
  font-weight: 700;
  margin-bottom: var(--spacing-sm);
}

.typing__mistakes-list {
  list-style: none;
}

.typing__mistake-item {
  padding: var(--spacing-xs) 0;
  border-bottom: 1px solid var(--color-border);
  font-size: var(--font-size-sm);
}

.typing__mistake-term { font-weight: 700; }
.typing__mistake-expected { color: var(--color-success); font-weight: 600; }
.typing__mistake-given { color: var(--color-text-secondary); }

/* ========================================
   Match mode — header, grid, summary
   ======================================== */

.match {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.match__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) 0;
}

.match__back-btn {
  background: transparent;
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
  font-weight: 600;
  padding: var(--spacing-xs) var(--spacing-sm);
  min-height: 48px;
}

.match__round {
  font-size: var(--font-size-base);
  font-weight: 700;
}

.match__timer {
  font-size: var(--font-size-base);
  font-weight: 600;
  color: var(--color-text-secondary);
  font-variant-numeric: tabular-nums;
}

.match__column {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

/* Match summary */
.match__summary {
  text-align: center;
  padding: var(--spacing-lg) 0;
}

.match__summary-title {
  font-size: var(--font-size-xl);
  font-weight: 800;
  margin-bottom: var(--spacing-lg);
}

.match__stats {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--spacing-xs) var(--spacing-md);
  text-align: left;
  max-width: 14rem;
  margin: 0 auto var(--spacing-lg);
}

.match__stat-label {
  font-weight: 600;
  color: var(--color-text-secondary);
}

.match__stat-value {
  font-weight: 700;
  color: var(--color-primary);
}

.match__next-btn {
  background-color: var(--color-primary);
  color: #fff;
  font-weight: 700;
  padding: var(--spacing-sm) var(--spacing-lg);
  min-height: 48px;
  margin-bottom: var(--spacing-sm);
}

.match__menu-btn {
  background-color: transparent;
  color: var(--color-text-secondary);
  border: 2px solid var(--color-border);
  font-weight: 600;
  padding: var(--spacing-sm) var(--spacing-lg);
  min-height: 48px;
}
